# Depends on: systemd expat libx11 libsm libice


packager="sipo"
contributors=""
maintainer="sipo"


description="Freedesktop.org message bus system"
url="https://wiki.freedesktop.org/www/Software/dbus/"


name=xdbus
_name=dbus
version=1.12.12
release=1


source=(http://dbus.freedesktop.org/releases/dbus/dbus-$version.tar.gz)


build() {
cd $_name-$version
./configure --prefix=/usr \
			--sysconfdir=/etc      \
			--localstatedir=/var   \
			--disable-doxygen-docs \
			--disable-xml-docs     \
			--disable-static       \
			--docdir=/usr/share/doc/dbus-$version \
			--enable-user-session \
			--enable-systemd \
			--with-systemdsystemunitdir=/lib/systemd/system \
			--with-x \
			--with-system-pid-file=/run/dbus/pid \
			--with-system-socket=/run/dbus/system_bus_socket \
SYSTEMCTL=/bin/systemctl

make
}

package() {
cd $_name-$version
make DESTDIR=$PKG install
mkdir $SRC/tmp
mv $PKG/usr/bin/dbus-launch $SRC/tmp
rm -r $PKG/*
mkdir -pv $PKG/usr/bin
mv $SRC/tmp/dbus-launch $PKG/usr/bin
}


