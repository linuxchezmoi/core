# Depends on: libpng libxrender libxext fontconfig pixman glib2 git libxxf86vm lzo mesa 


packager="sipo"
contributors=""
maintainer="sipo"


description="2D graphics library with support for multiple output devices"
url="https://cairographics.org/"


name=cairo
version=1.16.0
release=2


source=()


prepare(){
  git clone https://gitlab.freedesktop.org/cairo/cairo.git
  cd cairo
  NOCONFIGURE=1 ./autogen.sh
}

build() {
  cd cairo
  ./configure --prefix=/usr \
        --sysconfdir=/etc \
        --localstatedir=/var \
        --disable-static \
        --enable-gl \
        --enable-tee \
        --enable-svg 

  sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
  make
}


package() {
  cd cairo
  make DESTDIR="$PKG" install
  rm $PKG/usr/lib/*.la
  rm $PKG/usr/lib/cairo/*.la
}
